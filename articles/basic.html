<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sars2pack demonstration: working with new data â€¢ sars2pack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="sars2pack demonstration: working with new data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sars2pack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sars2pack.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/africa_fact_sheet.html">Africa fact sheet</a>
    </li>
    <li>
      <a href="../articles/basic.html">sars2pack demonstration: working with new data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>sars2pack demonstration: working with new data</h1>
                        <h4 class="author">Vincent J. Carey, stvjc at channing.harvard.edu</h4>
            
            <h4 class="date">March 25, 2020</h4>
      
      
      <div class="hidden name"><code>basic.Rmd</code></div>

    </div>

    
    
<div id="new-data-setup" class="section level1">
<h1 class="hasAnchor">
<a href="#new-data-setup" class="anchor"></a>New data setup</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span>({</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>({</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sars2pack)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lubridate)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">})</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">})</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">datevec =<span class="st"> </span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span>(</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1/22/20"</span>, <span class="st">"1/23/20"</span>, <span class="st">"1/24/20"</span>, <span class="st">"1/25/20"</span>, <span class="st">"1/26/20"</span>, <span class="st">"1/27/20"</span>, </a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="st">"1/28/20"</span>, <span class="st">"1/29/20"</span>, <span class="st">"1/30/20"</span>, <span class="st">"1/31/20"</span>, <span class="st">"2/1/20"</span>, <span class="st">"2/2/20"</span>, </a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="st">"2/3/20"</span>, <span class="st">"2/4/20"</span>, <span class="st">"2/5/20"</span>, <span class="st">"2/6/20"</span>, <span class="st">"2/7/20"</span>, <span class="st">"2/8/20"</span>, <span class="st">"2/9/20"</span>, </a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="st">"2/10/20"</span>, <span class="st">"2/11/20"</span>, <span class="st">"2/12/20"</span>, <span class="st">"2/13/20"</span>, <span class="st">"2/14/20"</span>, <span class="st">"2/15/20"</span>, <span class="st">"2/16/20"</span>, </a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="st">"2/17/20"</span>, <span class="st">"2/18/20"</span>, <span class="st">"2/19/20"</span>, <span class="st">"2/20/20"</span>, <span class="st">"2/21/20"</span>, <span class="st">"2/22/20"</span>, </a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="st">"2/23/20"</span>, <span class="st">"2/24/20"</span>, <span class="st">"2/25/20"</span>, <span class="st">"2/26/20"</span>, <span class="st">"2/27/20"</span>, <span class="st">"2/28/20"</span>, </a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="st">"2/29/20"</span>, <span class="st">"3/1/20"</span>, <span class="st">"3/2/20"</span>, <span class="st">"3/3/20"</span>, <span class="st">"3/4/20"</span>, <span class="st">"3/5/20"</span>, <span class="st">"3/6/20"</span>, </a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="st">"3/7/20"</span>, <span class="st">"3/8/20"</span>, <span class="st">"3/9/20"</span>, <span class="st">"3/10/20"</span>, <span class="st">"3/11/20"</span>, <span class="st">"3/12/20"</span>, <span class="st">"3/13/20"</span>, </a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="st">"3/14/20"</span>, <span class="st">"3/15/20"</span>, <span class="st">"3/16/20"</span>, <span class="st">"3/17/20"</span>, <span class="st">"3/18/20"</span>)))</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">cumevents =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, </a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">15</span>, <span class="dv">15</span>, </a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="dv">15</span>, <span class="dv">51</span>, <span class="dv">51</span>, <span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">60</span>, <span class="dv">68</span>, <span class="dv">74</span>, <span class="dv">98</span>, <span class="dv">118</span>, <span class="dv">149</span>, <span class="dv">217</span>, <span class="dv">262</span>, <span class="dv">402</span>, </a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="dv">518</span>, <span class="dv">583</span>, <span class="dv">959</span>, <span class="dv">1281</span>, <span class="dv">1663</span>, <span class="dv">2179</span>, <span class="dv">2727</span>, <span class="dv">3499</span>, <span class="dv">4632</span>, <span class="dv">6421</span>, <span class="dv">7783</span>)</a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(cumevents) =<span class="st"> </span>datevec</a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(cumevents<span class="op">~</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(cumevents))), <span class="dt">main=</span><span class="st">"US as of 3/18/2020 from Mallery"</span>)</a></code></pre></div>
<p><img src="basic_files/figure-html/newdates-1.png" width="700"></p>
</div>
<div id="basic-estimation-and-plotting" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-estimation-and-plotting" class="anchor"></a>Basic estimation and plotting</h1>
<p>Now we work with the R0 package functions. The plotting titles are hard to manage, and the code from package R0 will need to be dissected to improve annotation of figures.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">mGT &lt;-<span class="st"> </span><span class="kw">generation.time</span>(<span class="st">"gamma"</span>, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5.8</span>,.<span class="dv">95</span>)) <span class="co"># from DOI 10.7326/M20-0504</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">usdat =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sars2pack/man/trim_leading_zeros.html">trim_leading_zeros</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/diff.html">diff</a></span>(cumevents))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">est1 =<span class="st"> </span><span class="kw">estimate.R</span>( usdat, <span class="dt">GT =</span> mGT, <span class="dt">t =</span> <span class="kw"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(usdat))),</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="dt">begin=</span>1L, <span class="dt">end=</span><span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(usdat)), <span class="dt">methods=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"EG"</span>)) <span class="co"># , "ML", "TD"))</span></a></code></pre></div>
<pre><code>## Waiting for profiling to be done...</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">est1</a></code></pre></div>
<pre><code>## Reproduction number estimate using  Exponential Growth  method.
## R :  4.920046[ 4.75321 , 5.095213 ]</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mfrow=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/plot2.html">plot2</a></span>(est1)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw"><a href="../reference/plotfit2.html">plotfit2</a></span>(est1)</a></code></pre></div>
<p><img src="basic_files/figure-html/dor0-1.png" width="700"></p>
</div>
<div id="sensitivity-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#sensitivity-analysis" class="anchor"></a>Sensitivity analysis</h1>
<p>The R0 package includes sensitivity analysis support. We need to specify features of the generation time models, and ranges of R0 are produced.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">sa1 =<span class="st"> </span><span class="kw">sa.GT</span>(<span class="dt">incid=</span>usdat, <span class="dt">GT.type=</span><span class="st">"gamma"</span>, <span class="dt">GT.mean=</span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">1</span>), <span class="dt">GT.sd.range=</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">        <span class="dt">begin=</span>1L, <span class="dt">end=</span><span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(usdat)), <span class="dt">est.method=</span><span class="st">"EG"</span>)</a></code></pre></div>
<pre><code>## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">sa1 =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(sa1[,<span class="op">-</span><span class="dv">1</span>], <span class="dv">2</span>, as.numeric)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="dt">x=</span>sa1[,<span class="st">"GT.Mean"</span>], <span class="dt">xlab=</span><span class="st">"mean GT (days)"</span>, <span class="dt">y=</span>sa1[,<span class="st">"R"</span>], <span class="dt">ylim=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">7</span>), <span class="dt">ylab=</span><span class="st">"R0 (95pct CI)"</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">          <span class="dt">type=</span><span class="st">"p"</span>, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">"black"</span>, <span class="dt">main=</span><span class="st">"Sensitivity of R0 to mean GT"</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/graphics/arrows.html">arrows</a></span>(<span class="dt">x0=</span>sa1[,<span class="st">"GT.Mean"</span>], <span class="dt">y0=</span>sa1[,<span class="st">"CI.lower"</span>], </a>
<a class="sourceLine" id="cb9-5" data-line-number="5">            <span class="dt">y1=</span>sa1[,<span class="st">"CI.upper"</span>], <span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">code=</span><span class="dv">3</span>, <span class="dt">col=</span><span class="st">"black"</span>, <span class="dt">length=</span><span class="fl">0.05</span>)</a></code></pre></div>
<p><img src="basic_files/figure-html/lksa-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#new-data-setup">New data setup</a></li>
      <li><a href="#basic-estimation-and-plotting">Basic estimation and plotting</a></li>
      <li><a href="#sensitivity-analysis">Sensitivity analysis</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by John C Mallery, Charles Morefield, Sean Davis, VJ Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
