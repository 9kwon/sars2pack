<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sars2pack demonstration: working with new data â€¢ sars2pack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="sars2pack demonstration: working with new data">
<meta property="og:description" content="sars2pack">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sars2pack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sars2pack.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic.html">sars2pack demonstration: working with new data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/seandavi/sars2pack">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>sars2pack demonstration: working with new data</h1>
                        <h4 class="author">Vincent J. Carey, stvjc at channing.harvard.edu</h4>
            
            <h4 class="date">March 28, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/seandavi/sars2pack/blob/master/vignettes/basic.Rmd"><code>vignettes/basic.Rmd</code></a></small>
      <div class="hidden name"><code>basic.Rmd</code></div>

    </div>

    
    
<div id="new-data-setup" class="section level1">
<h1 class="hasAnchor">
<a href="#new-data-setup" class="anchor"></a>New data setup</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span>({
<span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>({
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sars2pack</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lubridate</span>)
})
})
<span class="no">datevec</span> <span class="kw">=</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span>(
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1/22/20"</span>, <span class="st">"1/23/20"</span>, <span class="st">"1/24/20"</span>, <span class="st">"1/25/20"</span>, <span class="st">"1/26/20"</span>, <span class="st">"1/27/20"</span>,
<span class="st">"1/28/20"</span>, <span class="st">"1/29/20"</span>, <span class="st">"1/30/20"</span>, <span class="st">"1/31/20"</span>, <span class="st">"2/1/20"</span>, <span class="st">"2/2/20"</span>,
<span class="st">"2/3/20"</span>, <span class="st">"2/4/20"</span>, <span class="st">"2/5/20"</span>, <span class="st">"2/6/20"</span>, <span class="st">"2/7/20"</span>, <span class="st">"2/8/20"</span>, <span class="st">"2/9/20"</span>,
<span class="st">"2/10/20"</span>, <span class="st">"2/11/20"</span>, <span class="st">"2/12/20"</span>, <span class="st">"2/13/20"</span>, <span class="st">"2/14/20"</span>, <span class="st">"2/15/20"</span>, <span class="st">"2/16/20"</span>,
<span class="st">"2/17/20"</span>, <span class="st">"2/18/20"</span>, <span class="st">"2/19/20"</span>, <span class="st">"2/20/20"</span>, <span class="st">"2/21/20"</span>, <span class="st">"2/22/20"</span>,
<span class="st">"2/23/20"</span>, <span class="st">"2/24/20"</span>, <span class="st">"2/25/20"</span>, <span class="st">"2/26/20"</span>, <span class="st">"2/27/20"</span>, <span class="st">"2/28/20"</span>,
<span class="st">"2/29/20"</span>, <span class="st">"3/1/20"</span>, <span class="st">"3/2/20"</span>, <span class="st">"3/3/20"</span>, <span class="st">"3/4/20"</span>, <span class="st">"3/5/20"</span>, <span class="st">"3/6/20"</span>,
<span class="st">"3/7/20"</span>, <span class="st">"3/8/20"</span>, <span class="st">"3/9/20"</span>, <span class="st">"3/10/20"</span>, <span class="st">"3/11/20"</span>, <span class="st">"3/12/20"</span>, <span class="st">"3/13/20"</span>,
<span class="st">"3/14/20"</span>, <span class="st">"3/15/20"</span>, <span class="st">"3/16/20"</span>, <span class="st">"3/17/20"</span>, <span class="st">"3/18/20"</span>)))
<span class="no">cumevents</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">11</span>,
<span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">15</span>,
<span class="fl">15</span>, <span class="fl">51</span>, <span class="fl">51</span>, <span class="fl">57</span>, <span class="fl">58</span>, <span class="fl">60</span>, <span class="fl">68</span>, <span class="fl">74</span>, <span class="fl">98</span>, <span class="fl">118</span>, <span class="fl">149</span>, <span class="fl">217</span>, <span class="fl">262</span>, <span class="fl">402</span>,
<span class="fl">518</span>, <span class="fl">583</span>, <span class="fl">959</span>, <span class="fl">1281</span>, <span class="fl">1663</span>, <span class="fl">2179</span>, <span class="fl">2727</span>, <span class="fl">3499</span>, <span class="fl">4632</span>, <span class="fl">6421</span>, <span class="fl">7783</span>)
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cumevents</span>) <span class="kw">=</span> <span class="no">datevec</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">cumevents</span>~<span class="fu"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cumevents</span>))), <span class="kw">main</span><span class="kw">=</span><span class="st">"US as of 3/18/2020 from Mallery"</span>)</pre></body></html></div>
<p><img src="basic_files/figure-html/newdates-1.png" width="700"></p>
</div>
<div id="basic-estimation-and-plotting" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-estimation-and-plotting" class="anchor"></a>Basic estimation and plotting</h1>
<p>Now we work with the R0 package functions. The plotting titles are hard to manage, and the code from package R0 will need to be dissected to improve annotation of figures.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">mGT</span> <span class="kw">&lt;-</span> <span class="fu">generation.time</span>(<span class="st">"gamma"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5.8</span>,<span class="fl">.95</span>)) <span class="co"># from DOI 10.7326/M20-0504</span>
<span class="no">usdat</span> <span class="kw">=</span> <span class="fu"><a href="../reference/trim_leading_values.html">trim_leading_values</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span>(<span class="no">cumevents</span>))
<span class="no">est1</span> <span class="kw">=</span> <span class="fu">estimate.R</span>( <span class="no">usdat</span>, <span class="kw">GT</span> <span class="kw">=</span> <span class="no">mGT</span>, <span class="kw">t</span> <span class="kw">=</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span>(<span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">usdat</span>))),
  <span class="kw">begin</span><span class="kw">=</span><span class="fl">1L</span>, <span class="kw">end</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">usdat</span>)), <span class="kw">methods</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"EG"</span>, <span class="st">"TD"</span>)) <span class="co"># , "ML", "TD"))</span></pre></body></html></div>
<pre><code>## Waiting for profiling to be done...</code></pre>
<pre><code>## Warning in est.R0.TD(epid = c(`2020-01-24` = 1, `2020-01-25` = 0, `2020-01-26` =
## 3, : Simulations may take several minutes.</code></pre>
<pre><code>## Warning in est.R0.TD(epid = c(`2020-01-24` = 1, `2020-01-25` = 0, `2020-01-26` =
## 3, : Using initial incidence as initial number of cases.</code></pre>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">est1</span></pre></body></html></div>
<pre><code>## Reproduction number estimate using  Exponential Growth  method.
## R :  4.920046[ 4.75321 , 5.095213 ]
## 
## Reproduction number estimate using  Time-Dependent  method.
## 3.356286 0 1.838833 0 0 0 0 0.06355674 0.003480709 0 ...</code></pre>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>))
<span class="fu"><a href="../reference/plot2.html">plot2</a></span>(<span class="no">est1</span>)
<span class="fu"><a href="../reference/plotfit2.html">plotfit2</a></span>(<span class="no">est1</span>)</pre></body></html></div>
<p><img src="basic_files/figure-html/dor0-1.png" width="700"></p>
</div>
<div id="sensitivity-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#sensitivity-analysis" class="anchor"></a>Sensitivity analysis</h1>
<p>The R0 package includes sensitivity analysis support. We need to specify features of the generation time models, and ranges of R0 are produced.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">sa1</span> <span class="kw">=</span> <span class="fu">sa.GT</span>(<span class="kw">incid</span><span class="kw">=</span><span class="no">usdat</span>, <span class="kw">GT.type</span><span class="kw">=</span><span class="st">"gamma"</span>, <span class="kw">GT.mean</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">3</span>,<span class="fl">7</span>,<span class="fl">1</span>), <span class="kw">GT.sd.range</span><span class="kw">=</span><span class="fl">2</span>,
        <span class="kw">begin</span><span class="kw">=</span><span class="fl">1L</span>, <span class="kw">end</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">usdat</span>)), <span class="kw">est.method</span><span class="kw">=</span><span class="st">"EG"</span>)</pre></body></html></div>
<pre><code>## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...
## Waiting for profiling to be done...</code></pre>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">sa1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(<span class="no">sa1</span>[,-<span class="fl">1</span>], <span class="fl">2</span>, <span class="no">as.numeric</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="kw">x</span><span class="kw">=</span><span class="no">sa1</span>[,<span class="st">"GT.Mean"</span>], <span class="kw">xlab</span><span class="kw">=</span><span class="st">"mean GT (days)"</span>, <span class="kw">y</span><span class="kw">=</span><span class="no">sa1</span>[,<span class="st">"R"</span>], <span class="kw">ylim</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">7</span>), <span class="kw">ylab</span><span class="kw">=</span><span class="st">"R0 (95pct CI)"</span>,
          <span class="kw">type</span><span class="kw">=</span><span class="st">"p"</span>, <span class="kw">pch</span><span class="kw">=</span><span class="fl">19</span>, <span class="kw">col</span><span class="kw">=</span><span class="st">"black"</span>, <span class="kw">main</span><span class="kw">=</span><span class="st">"Sensitivity of R0 to mean GT"</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/arrows.html">arrows</a></span>(<span class="kw">x0</span><span class="kw">=</span><span class="no">sa1</span>[,<span class="st">"GT.Mean"</span>], <span class="kw">y0</span><span class="kw">=</span><span class="no">sa1</span>[,<span class="st">"CI.lower"</span>],
            <span class="kw">y1</span><span class="kw">=</span><span class="no">sa1</span>[,<span class="st">"CI.upper"</span>], <span class="kw">angle</span><span class="kw">=</span><span class="fl">90</span>, <span class="kw">code</span><span class="kw">=</span><span class="fl">3</span>, <span class="kw">col</span><span class="kw">=</span><span class="st">"black"</span>, <span class="kw">length</span><span class="kw">=</span><span class="fl">0.05</span>)</pre></body></html></div>
<p><img src="basic_files/figure-html/lksa-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by John C Mallery, Charles Morefield, Sean Davis, VJ Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
